/*! For license information please see 536c4b9e.19075b39.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{146:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(9),o=(n(0),n(159)),s=n(164),c=n(163),i={id:"custom-commands",title:"Custom Commands",description:"Sending custom commands with Assistant Relay"},l={id:"commands/custom-commands",title:"Custom Commands",description:"Sending custom commands with Assistant Relay",source:"@site/../docs/commands/custom.mdx",permalink:"/assistant-relay/docs/commands/custom-commands",editUrl:"https://github.com/greghesp/assistant-relay/edit/doc-src/../docs/commands/custom.mdx",sidebar:"docs",previous:{title:"Preset Broadcasts",permalink:"/assistant-relay/docs/commands/presets"},next:{title:"Search for cast devices",permalink:"/assistant-relay/docs/cast/search"}},u=[{value:"Sending a custom command",id:"sending-a-custom-command",children:[{value:"Restrictions",id:"restrictions",children:[]}]},{value:"Casting back audio responses",id:"casting-back-audio-responses",children:[]}],b={rightToc:u};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Assistant Relay lets you send any command to Google Assistant that would normally follow the ",Object(o.b)("inlineCode",{parentName:"p"},"OK Google")," commmand."),Object(o.b)("h2",{id:"sending-a-custom-command"},"Sending a custom command"),Object(o.b)("p",null,"To send a custom command, simply send a HTTP POST request to ",Object(o.b)("inlineCode",{parentName:"p"},"/assistant")," with the following json-encoded body parameter:"),Object(o.b)(s.a,{defaultValue:"json",values:[{label:"JSON",value:"json"},{label:"Schema",value:"schema"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(o.b)(c.a,{value:"json",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "command": "tell me a joke",\n    "converse": true, // Or false if you don\'t want the response broadcasted\n    "user": "greg" // Match the name of the users you setup\n}\n'))),Object(o.b)(c.a,{value:"schema",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"command: STRING\nconverse: BOOLEAN\nuser: STRING\n"))),Object(o.b)(c.a,{value:"response",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "success": true, // Or false\n    "response": "Why did the chicken cross the road?  To get to the other side", // Contains the text response from Google Assistant if applicable\n    "audio": "/server/audio?v=1581510182698", // A URL to the audio response from Google Assistant\n    "error": "Error Message" // Only shown if success if false\n}\n')))),Object(o.b)("p",null,"Once executed, Assistant Relay will then broadcast the response to your Google Home devices."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"}," ",Object(o.b)("strong",{parentName:"p"},"Note"),": If you do not want Assistant Relay to broadcast the response, set the ",Object(o.b)("inlineCode",{parentName:"p"},"converse")," parameter to false")),Object(o.b)("h3",{id:"restrictions"},"Restrictions"),Object(o.b)("p",null,"As Assistant Relay uses the Google Assistant Service, there are some restrictions."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Google does not allow media commands to work, so sending a command such as ",Object(o.b)("inlineCode",{parentName:"li"},"Play John Mayer in the Office")," will not work")),Object(o.b)("h2",{id:"casting-back-audio-responses"},"Casting back audio responses"),Object(o.b)("p",null,"Assistant Relay now supports Casting (in v3.3.0b and above).\nIn the above custom command example, the response is populated with an audio field."),Object(o.b)("p",null,"It is possible to pass this URL back to the ",Object(o.b)("inlineCode",{parentName:"p"},"/cast")," endpoint for it to play as per the following json-encoded body parameter:"),Object(o.b)(s.a,{defaultValue:"json",values:[{label:"JSON",value:"json"},{label:"Schema",value:"schema"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(o.b)(c.a,{value:"json",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "device": "Office Hub",\n    "source": "http://192.168.1.174:3000/server/audio?v=1581510182698",\n    "type": "remote"\n}\n'))),Object(o.b)(c.a,{value:"schema",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"device: STRING\nsource: STRING\ntype: STRING\n"))),Object(o.b)(c.a,{value:"response",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),"// No response.....yet\n")))),Object(o.b)("p",null,"For more information, please see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../cast/casting"}),"Casting Media")))}p.isMDXComponent=!0},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),b=u(n),m=a,d=b["".concat(s,".").concat(m)]||b[m]||p[m]||o;return n?r.a.createElement(d,c(c({ref:t},l),{},{components:n})):r.a.createElement(d,c({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=m;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:a,s[1]=c;for(var l=2;l<o;l++)s[l]=n[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},160:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var s=r.apply(null,a);s&&e.push(s)}else if("object"===o)for(var c in a)n.call(a,c)&&a[c]&&e.push(c)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},162:function(e,t,n){"use strict";var a=n(0),r=Object(a.createContext)({tabGroupChoices:{},setTabGroupChoices:function(){}});t.a=r},163:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",null,e.children)}},164:function(e,t,n){"use strict";n(23),n(17),n(18);var a=n(0),r=n.n(a),o=n(162);var s=function(){return Object(a.useContext)(o.a)},c=n(160),i=n.n(c),l=n(126),u=n.n(l),b=37,p=39;t.a=function(e){var t=e.block,n=e.children,o=e.defaultValue,c=e.values,l=e.groupId,m=s(),d=m.tabGroupChoices,f=m.setTabGroupChoices,O=Object(a.useState)(o),j=O[0],h=O[1];if(null!=l){var y=d[l];null!=y&&y!==j&&h(y)}var v=function(e){h(e),null!=l&&f(l,e)},g=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:i()("tabs",{"tabs--block":t})},c.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":j===t,className:i()("tabs__item",u.a.tabItem,{"tabs__item--active":j===t}),key:t,ref:function(e){return g.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case p:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case b:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(g,e.target,e)},onFocus:function(){return v(t)},onClick:function(){return v(t)}},n)}))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter((function(e){return e.props.value===j}))[0]))}}}]);